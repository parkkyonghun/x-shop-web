{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 9, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/Navbar.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"actions\": \"Navbar-module__cJzEcG__actions\",\n  \"badge\": \"Navbar-module__cJzEcG__badge\",\n  \"cartBtn\": \"Navbar-module__cJzEcG__cartBtn\",\n  \"link\": \"Navbar-module__cJzEcG__link\",\n  \"links\": \"Navbar-module__cJzEcG__links\",\n  \"logo\": \"Navbar-module__cJzEcG__logo\",\n  \"navbar\": \"Navbar-module__cJzEcG__navbar\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/pheakdey/Documents/GitHub/x-shop-web/src/context/CartContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, ReactNode, useEffect } from \"react\";\nimport { CartItem, Product } from \"@/types\";\n\ninterface CartContextType {\n    items: CartItem[];\n    addToCart: (product: Product) => void;\n    removeFromCart: (productId: string) => void;\n    clearCart: () => void;\n    total: number;\n    count: number;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport function CartProvider({ children }: { children: ReactNode }) {\n    const [items, setItems] = useState<CartItem[]>([]);\n\n    // Simple persistence\n    useEffect(() => {\n        const saved = localStorage.getItem(\"cart\");\n        if (saved) {\n            try {\n                setItems(JSON.parse(saved));\n            } catch (e) {\n                console.error(\"Failed to load cart\", e);\n            }\n        }\n    }, []);\n\n    useEffect(() => {\n        localStorage.setItem(\"cart\", JSON.stringify(items));\n    }, [items]);\n\n    const addToCart = (product: Product) => {\n        setItems((prev) => {\n            const existing = prev.find((item) => item.id === product.id);\n            if (existing) {\n                return prev.map((item) =>\n                    item.id === product.id\n                        ? { ...item, quantity: item.quantity + 1 }\n                        : item\n                );\n            }\n            return [...prev, { ...product, quantity: 1 }];\n        });\n    };\n\n    const removeFromCart = (productId: string) => {\n        setItems((prev) => prev.filter((item) => item.id !== productId));\n    };\n\n    const clearCart = () => setItems([]);\n\n    const total = items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    const count = items.reduce((sum, item) => sum + item.quantity, 0);\n\n    return (\n        <CartContext.Provider\n            value={{ items, addToCart, removeFromCart, clearCart, total, count }}\n        >\n            {children}\n        </CartContext.Provider>\n    );\n}\n\nexport function useCart() {\n    const context = useContext(CartContext);\n    if (context === undefined) {\n        throw new Error(\"useCart must be used within a CartProvider\");\n    }\n    return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAcA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAC9D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAa,EAAE;IAEjD,qBAAqB;IACrB,IAAA,kNAAS,EAAC;QACN,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACP,IAAI;gBACA,SAAS,KAAK,KAAK,CAAC;YACxB,EAAE,OAAO,GAAG;gBACR,QAAQ,KAAK,CAAC,uBAAuB;YACzC;QACJ;IACJ,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACN,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;IAChD,GAAG;QAAC;KAAM;IAEV,MAAM,YAAY,CAAC;QACf,SAAS,CAAC;YACN,MAAM,WAAW,KAAK,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK,QAAQ,EAAE;YAC3D,IAAI,UAAU;gBACV,OAAO,KAAK,GAAG,CAAC,CAAC,OACb,KAAK,EAAE,KAAK,QAAQ,EAAE,GAChB;wBAAE,GAAG,IAAI;wBAAE,UAAU,KAAK,QAAQ,GAAG;oBAAE,IACvC;YAEd;YACA,OAAO;mBAAI;gBAAM;oBAAE,GAAG,OAAO;oBAAE,UAAU;gBAAE;aAAE;QACjD;IACJ;IAEA,MAAM,iBAAiB,CAAC;QACpB,SAAS,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;IACzD;IAEA,MAAM,YAAY,IAAM,SAAS,EAAE;IAEnC,MAAM,QAAQ,MAAM,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,KAAK,GAAG,KAAK,QAAQ,EAAE;IAC5E,MAAM,QAAQ,MAAM,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;IAE/D,qBACI,8OAAC,YAAY,QAAQ;QACjB,OAAO;YAAE;YAAO;YAAW;YAAgB;YAAW;YAAO;QAAM;kBAElE;;;;;;AAGb;AAEO,SAAS;IACZ,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX"}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///Users/pheakdey/Documents/GitHub/x-shop-web/src/actions/auth.ts"],"sourcesContent":["\"use server\";\n\nimport db from \"@/lib/db\";\nimport { createSession, logout } from \"@/lib/session\";\nimport bcrypt from \"bcryptjs\";\n// import { v4 as uuidv4 } from \"uuid\";\nimport { redirect } from \"next/navigation\";\n\n// Since uuid isn't installed, let's use a simple random string for now or install it.\n// I'll use crypto.randomUUID() which is native in Node > 19\nimport crypto from \"crypto\";\n\nexport async function registerAction(formData: FormData) {\n    const name = formData.get(\"name\") as string;\n    const email = formData.get(\"email\") as string;\n    const password = formData.get(\"password\") as string;\n\n    if (!name || !email || !password) {\n        return { error: \"All fields are required\" };\n    }\n\n    // Check if user exists\n    const existingUser = db.prepare(\"SELECT * FROM users WHERE email = ?\").get(email);\n    if (existingUser) {\n        return { error: \"User already exists\" };\n    }\n\n    const hashedPassword = await bcrypt.hash(password, 10);\n    const id = crypto.randomUUID();\n\n    // Insert user\n    try {\n        const stmt = db.prepare(\"INSERT INTO users (id, name, email, password) VALUES (?, ?, ?, ?)\");\n        stmt.run(id, name, email, hashedPassword);\n    } catch (err) {\n        console.error(err);\n        return { error: \"Database error\" };\n    }\n\n    // Create session\n    await createSession({ id, name, email });\n    redirect(\"/\");\n}\n\nexport async function loginAction(formData: FormData) {\n    const email = formData.get(\"email\") as string;\n    const password = formData.get(\"password\") as string;\n\n    const user: any = db.prepare(\"SELECT * FROM users WHERE email = ?\").get(email);\n\n    if (!user || !(await bcrypt.compare(password, user.password))) {\n        return { error: \"Invalid credentials\" };\n    }\n\n    await createSession({ id: user.id, name: user.name, email: user.email, avatar: user.avatar });\n    redirect(\"/\");\n}\n\nexport async function logoutAction() {\n    await logout();\n    redirect(\"/login\");\n}\n"],"names":[],"mappings":";;;;;;;MA0DsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,gDAAA"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///Users/pheakdey/Documents/GitHub/x-shop-web/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport styles from \"./Navbar.module.css\";\nimport { useCart } from \"@/context/CartContext\";\nimport { User } from \"@/types\";\nimport { logoutAction } from \"@/actions/auth\";\n\nexport default function Navbar({ user }: { user?: User | null }) {\n    const { count } = useCart();\n\n    return (\n        <nav className={`${styles.navbar} glass-panel`}>\n            <Link href=\"/\" className={styles.logo}>\n                X-Shop\n            </Link>\n\n            <div className={styles.links}>\n                <Link href=\"/\" className={styles.link}>Store</Link>\n                {user && <Link href=\"/orders\" className={styles.link}>Orders</Link>}\n                {user && <Link href=\"/profile\" className={styles.link}>Profile</Link>}\n            </div>\n\n            <div className={styles.actions}>\n                {user ? (\n                    <div style={{ display: \"flex\", gap: \"1rem\", alignItems: \"center\" }}>\n                        <span style={{ fontSize: \"0.9rem\", color: \"var(--primary)\" }}>{user.name}</span>\n                        <form action={logoutAction}>\n                            <button type=\"submit\" className=\"btn btn-secondary\" style={{ padding: \"0.5rem 1rem\", fontSize: \"0.9rem\" }}>\n                                Logout\n                            </button>\n                        </form>\n                    </div>\n                ) : (\n                    <Link href=\"/login\" className=\"btn btn-secondary\" style={{ padding: \"0.5rem 1rem\", fontSize: \"0.9rem\" }}>\n                        Login\n                    </Link>\n                )}\n                <Link href=\"/cart\" className={styles.cartBtn}>\n                    ðŸ›’\n                    {count > 0 && <span className={styles.badge}>{count}</span>}\n                </Link>\n            </div>\n        </nav>\n    );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQe,SAAS,OAAO,EAAE,IAAI,EAA0B;IAC3D,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,yIAAO;IAEzB,qBACI,8OAAC;QAAI,WAAW,GAAG,kJAAM,CAAC,MAAM,CAAC,YAAY,CAAC;;0BAC1C,8OAAC,uKAAI;gBAAC,MAAK;gBAAI,WAAW,kJAAM,CAAC,IAAI;0BAAE;;;;;;0BAIvC,8OAAC;gBAAI,WAAW,kJAAM,CAAC,KAAK;;kCACxB,8OAAC,uKAAI;wBAAC,MAAK;wBAAI,WAAW,kJAAM,CAAC,IAAI;kCAAE;;;;;;oBACtC,sBAAQ,8OAAC,uKAAI;wBAAC,MAAK;wBAAU,WAAW,kJAAM,CAAC,IAAI;kCAAE;;;;;;oBACrD,sBAAQ,8OAAC,uKAAI;wBAAC,MAAK;wBAAW,WAAW,kJAAM,CAAC,IAAI;kCAAE;;;;;;;;;;;;0BAG3D,8OAAC;gBAAI,WAAW,kJAAM,CAAC,OAAO;;oBACzB,qBACG,8OAAC;wBAAI,OAAO;4BAAE,SAAS;4BAAQ,KAAK;4BAAQ,YAAY;wBAAS;;0CAC7D,8OAAC;gCAAK,OAAO;oCAAE,UAAU;oCAAU,OAAO;gCAAiB;0CAAI,KAAK,IAAI;;;;;;0CACxE,8OAAC;gCAAK,QAAQ,sKAAY;0CACtB,cAAA,8OAAC;oCAAO,MAAK;oCAAS,WAAU;oCAAoB,OAAO;wCAAE,SAAS;wCAAe,UAAU;oCAAS;8CAAG;;;;;;;;;;;;;;;;6CAMnH,8OAAC,uKAAI;wBAAC,MAAK;wBAAS,WAAU;wBAAoB,OAAO;4BAAE,SAAS;4BAAe,UAAU;wBAAS;kCAAG;;;;;;kCAI7G,8OAAC,uKAAI;wBAAC,MAAK;wBAAQ,WAAW,kJAAM,CAAC,OAAO;;4BAAE;4BAEzC,QAAQ,mBAAK,8OAAC;gCAAK,WAAW,kJAAM,CAAC,KAAK;0CAAG;;;;;;;;;;;;;;;;;;;;;;;;AAKlE"}}]
}